{"ast":null,"code":"import _objectSpread from \"/Users/admin/Desktop/web-ele-ui/vue-manage/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Mock from \"mockjs\";\nimport { mapMutations } from \"vuex\";\nimport { getMenu } from \"@/api/data.js\";\nexport default {\n  name: 'login',\n  data: function data() {\n    return {\n      form: {\n        username: \"\",\n        password: \"\"\n      },\n      rules: {\n        username: [{\n          required: true,\n          message: \"请输入用户名\",\n          trigger: \"blur\"\n        }, {\n          min: 3,\n          message: \"用户名长度不能小于3位\",\n          trigger: \"blur\"\n        }],\n        password: [{\n          required: true,\n          message: \"请输入密码\",\n          trigger: \"blur\"\n        }]\n      }\n    };\n  },\n  methods: _objectSpread(_objectSpread({}, mapMutations([\"setToken\", \"clearMenu\", \"setMenu\", \"addMenu\"])), {}, {\n    login: function login() {\n      var _this = this;\n\n      this.$refs[\"login-form\"].validate(function (valid) {\n        if (valid) {\n          getMenu(_this.form).then(function (res) {\n            console.log(res);\n\n            if (res.data.code == \"20000\") {\n              _this.clearMenu();\n\n              _this.setMenu(res.data.data.menu);\n\n              _this.setToken(res.data.data.token);\n\n              _this.addMenu(_this.$router);\n\n              _this.$router.push({\n                name: \"home\"\n              });\n            } else {\n              _this.$message.error(res.data.message);\n            }\n          });\n        } else {\n          _this.$message(\"请检查您的账号或密码\", \"确定\");\n\n          _this.$refs[\"login-form\"].resetFields();\n\n          return false;\n        }\n      });\n    }\n  })\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA;AACA;AACA;AACA;AACAA,eADA;AAEAC,MAFA,kBAEA;AACA;AACAC;AACAC,oBADA;AAEAC;AAFA,OADA;AAKAC;AACAF,mBACA;AAAAG;AAAAC;AAAAC;AAAA,SADA,EAEA;AACAC,gBADA;AAEAF,gCAFA;AAGAC;AAHA,SAFA,CADA;AASAJ,mBACA;AACAE,wBADA;AAEAC,0BAFA;AAGAC;AAHA,SADA;AATA;AALA;AAuBA,GA1BA;AA4BAE,2CACAC,6DADA;AAEAC,SAFA,mBAEA;AAAA;;AACA;AACA;AACAC;AACAC;;AACA;AACA;;AACA;;AACA;;AACA;;AACA;AAAAd;AAAA;AACA,aANA,MAMA;AACA;AACA;AACA,WAXA;AAYA,SAbA,MAaA;AACA;;AACA;;AACA;AACA;AACA,OAnBA;AAoBA;AAvBA;AA5BA","names":["name","data","form","username","password","rules","required","message","trigger","min","methods","mapMutations","login","getMenu","console"],"sourceRoot":"src/views/Login","sources":["login.vue"],"sourcesContent":["<template>\n  <el-form\n    :model=\"form\"\n    status-icon\n    :rules=\"rules\"\n    ref=\"login-form\"\n    label-width=\"100px\"\n    class=\"login-container\"\n  >\n    <h3 class=\"login-title\">系统登录</h3>\n    <el-form-item\n      label=\"用户名\"\n      label-width=\"80px\"\n      prop=\"username\"\n      class=\"username\"\n    >\n      <el-input\n        type=\"input\"\n        v-model=\"form.username\"\n        auto-complete=\"off\"\n        placeholder=\"请输入账号\"\n      >\n      </el-input>\n    </el-form-item>\n    <el-form-item label=\"密码\" label-width=\"80px\" prop=\"password\">\n      <el-input\n        type=\"password\"\n        v-model=\"form.password\"\n        placeholder=\"请输入密码\"\n        clearable\n      >\n      </el-input>\n    </el-form-item>\n    <el-form-item class=\"login-submit\">\n      <el-button type=\"primary\" @click=\"login\" class=\"login-submit\">\n        登录\n      </el-button>\n    </el-form-item>\n  </el-form>\n</template>\n\n<script>\nimport Mock from \"mockjs\";\nimport { mapMutations } from \"vuex\";\nimport { getMenu } from \"@/api/data.js\";\nexport default {\n  name: 'login',\n  data() {\n    return {\n      form: {\n        username: \"\",\n        password: \"\",\n      },\n      rules: {\n        username: [\n          { required: true, message: \"请输入用户名\", trigger: \"blur\" },\n          {\n            min: 3,\n            message: \"用户名长度不能小于3位\",\n            trigger: \"blur\",\n          },\n        ],\n        password: [\n          {\n            required: true,\n            message: \"请输入密码\",\n            trigger: \"blur\",\n          },\n        ],\n      },\n    };\n  },\n\n  methods: {\n    ...mapMutations([\"setToken\", \"clearMenu\", \"setMenu\", \"addMenu\"]),\n    login() {\n      this.$refs[\"login-form\"].validate((valid) => {\n        if (valid) {\n          getMenu(this.form).then((res) => {\n            console.log(res);\n            if (res.data.code == \"20000\") {\n              this.clearMenu();\n              this.setMenu(res.data.data.menu);\n              this.setToken(res.data.data.token);\n              this.addMenu(this.$router);\n              this.$router.push({ name: \"home\" });\n            } else {\n              this.$message.error(res.data.message);\n            }\n          });\n        } else {\n          this.$message(\"请检查您的账号或密码\", \"确定\");\n          this.$refs[\"login-form\"].resetFields();\n          return false;\n        }\n      });\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.login-container {\n  border-radius: 15px;\n  background-clip: padding-box;\n  margin: 180px auto;\n  width: 350px;\n  padding: 35px 35px 15px 35px;\n  background-color: #fff;\n  border: 1px solid #eaeaea;\n  box-shadow: 0 0 25px #cac6c6;\n}\n.login-title {\n  margin: 0px auto 40px auto;\n  text-align: center;\n  color: #505458;\n}\n.login-submit {\n  margin: 10px auto 0px auto;\n}\n</style>"]},"metadata":{},"sourceType":"module"}