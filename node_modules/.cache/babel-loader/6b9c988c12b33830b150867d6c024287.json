{"ast":null,"code":"import Cookie from 'js-cookie';\nexport default {\n  state: {\n    isCollapse: false,\n    tabsList: [{\n      path: '/',\n      name: 'home',\n      label: '首页',\n      icon: 'home'\n    }],\n    // 记录路由和高亮的对应关系\n    currentMenu: null,\n    menu: []\n  },\n  mutations: {\n    collapseMenu(state) {\n      state.isCollapse = !state.isCollapse;\n    },\n\n    // 用于改变state中的tabsList数组\n    selectMenu(state, val) {\n      if (val.name !== 'home') {\n        state.currentMenu = val; //拿到当前选中项是否在tags中\n\n        const result = state.tabsList.findIndex(item => item.name === val.name);\n\n        if (result === -1) {\n          //不存在\n          state.tabsList.push(val);\n        } else {\n          //将选中的标识进行重置\n          state.currentMenu = null;\n        }\n      }\n    },\n\n    closeTag(state, val) {\n      //找到当前点击的val(tag)所对应的index来删除该数据\n      const result = state.tabsList.findIndex(item => item.name === val.name);\n      state.tabsList.splice(result, 1);\n    },\n\n    setMenu(state, val) {\n      state.menu = val; //将menu缓存到coolie中 避免在刷新页面的时候丢失menu\n\n      Cookie.set('menu', JSON.stringify(val));\n    },\n\n    clearMenu(state) {\n      state.menu = [];\n      Cookie.remove('menu');\n    },\n\n    addMenu(state, router) {\n      if (!Cookie.get('menu')) {\n        return;\n      }\n\n      const menu = JSON.parse(Cookie.get('menu'));\n      state.menu = menu; //对拿到的menu进行处理\n\n      const menuArray = []; //menu中包括以及及二级菜单\n\n      menu.forEach(item => {\n        //处理二级菜单\n        if (item.children) {\n          console.log(item.children);\n          item.children = item.children.map(item => {\n            //动态添加路由\n            item.component = () => import(`../views/${item.url}`);\n\n            return item;\n          });\n          menuArray.push(...item.children);\n        } else {\n          item.component = () => import(`../views/${item.url}`);\n\n          menuArray.push(item);\n        }\n      }); //实现路由的动态添加\n\n      menuArray.forEach(item => {\n        console.log(router);\n        router.addRoute('Main', item);\n      });\n    }\n\n  }\n};","map":{"version":3,"names":["Cookie","state","isCollapse","tabsList","path","name","label","icon","currentMenu","menu","mutations","collapseMenu","selectMenu","val","result","findIndex","item","push","closeTag","splice","setMenu","set","JSON","stringify","clearMenu","remove","addMenu","router","get","parse","menuArray","forEach","children","console","log","map","component","url","addRoute"],"sources":["/Users/admin/Desktop/vue-manage-system 2/src/store/tab.js"],"sourcesContent":["import Cookie from 'js-cookie'\nexport default {\n    state: {\n        isCollapse: false,\n        tabsList: [\n            {\n                path: '/',\n                name: 'home',\n                label: '首页',\n                icon: 'home'\n            }\n        ],\n        // 记录路由和高亮的对应关系\n        currentMenu: null,\n        menu: []\n    },\n    mutations: {\n        collapseMenu(state) {\n            state.isCollapse = !state.isCollapse\n        },\n        // 用于改变state中的tabsList数组\n        selectMenu(state, val) {\n            if (val.name !== 'home') {\n                state.currentMenu = val\n                //拿到当前选中项是否在tags中\n                const result = state.tabsList.findIndex(item => item.name === val.name)\n                if (result === -1) {//不存在\n                    state.tabsList.push(val)\n                } else {\n                    //将选中的标识进行重置\n                    state.currentMenu = null;\n                }\n            }\n\n        },\n        closeTag(state, val) {\n            //找到当前点击的val(tag)所对应的index来删除该数据\n            const result = state.tabsList.findIndex(item => item.name === val.name)\n            state.tabsList.splice(result, 1)\n\n        },\n        setMenu(state, val) {\n            state.menu = val\n            //将menu缓存到coolie中 避免在刷新页面的时候丢失menu\n            Cookie.set('menu', JSON.stringify(val))\n        },\n        clearMenu(state) {\n            state.menu = []\n            Cookie.remove('menu')\n        },\n        addMenu(state, router) {\n\n            if (!Cookie.get('menu')) {\n                return\n            }\n            const menu = JSON.parse(Cookie.get('menu'))\n            state.menu = menu\n            //对拿到的menu进行处理\n            const menuArray = []\n            //menu中包括以及及二级菜单\n            menu.forEach(item => {\n                //处理二级菜单\n                if (item.children) {\n                    console.log(item.children);\n                    item.children = item.children.map(item => {\n                        //动态添加路由\n                        item.component = () => import(`../views/${item.url}`)\n                        return item\n                    })\n                    menuArray.push(...item.children)\n                } else {\n                    item.component = () => import(`../views/${item.url}`)\n                    menuArray.push(item)\n                }\n            });\n            //实现路由的动态添加\n            menuArray.forEach(item => {\n                console.log(router);\n                router.addRoute('Main', item)\n            })\n        }\n    }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}