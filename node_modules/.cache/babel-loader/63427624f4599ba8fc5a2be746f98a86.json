{"ast":null,"code":"import \"core-js/modules/es.array.map.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport CommonForm from \"@/components/CommonForm.vue\";\nimport CommonTable from \"@/components/CommonTable.vue\";\nimport { editUser, addUser, getUserList, delUser } from \"../../../api/data\";\nexport default {\n  name: \"user\",\n  components: {\n    CommonForm: CommonForm,\n    CommonTable: CommonTable\n  },\n  data: function data() {\n    return {\n      operateType: \"add\",\n      isShow: false,\n      operateFormLabel: [{\n        model: \"name\",\n        label: \"姓名\",\n        type: \"input\"\n      }, {\n        model: \"age\",\n        label: \"年龄\",\n        type: \"input\"\n      }, {\n        model: \"sex\",\n        label: \"性别\",\n        type: \"select\",\n        opts: [{\n          label: \"男\",\n          value: 1\n        }, {\n          label: \"女\",\n          value: 0\n        }]\n      }, {\n        model: \"birth\",\n        label: \"出生日期\",\n        type: \"date\"\n      }, {\n        model: \"addr\",\n        label: \"地址\",\n        type: \"input\"\n      }],\n      operateForm: {\n        name: \"\",\n        addr: \"\",\n        age: \"\",\n        birth: \"\",\n        sex: \"\"\n      },\n      formLabel: [{\n        model: \"keyword\",\n        label: \"\",\n        type: \"input\"\n      }],\n      searchForm: {\n        keyword: \"\"\n      },\n      tableData: [],\n      tableLabel: [{\n        prop: \"name\",\n        label: \"姓名\"\n      }, {\n        prop: \"age\",\n        label: \"年龄\"\n      }, {\n        prop: \"sexLabel\",\n        label: \"性别\"\n      }, {\n        prop: \"birth\",\n        label: \"出生日期\",\n        width: 200\n      }, {\n        prop: \"addr\",\n        label: \"地址\",\n        width: 320\n      }],\n      config: {\n        page: 1,\n        total: 30\n      }\n    };\n  },\n  methods: {\n    confirm: function confirm() {\n      var _this = this;\n\n      if (this.operateType == \"edit\") {\n        editUser(this.operateForm).then(function (res) {\n          console.log(res);\n          _this.isShow = false;\n\n          _this.getInitList();\n        });\n      } else {\n        addUser(this.operateForm).then(function (res) {\n          console.log(res);\n          _this.isShow = false;\n\n          _this.getInitList();\n        });\n      }\n    },\n    addUser: function addUser() {\n      this.isShow = true;\n      this.operateType = \"add\";\n      this.operateForm = {\n        name: \"\",\n        addr: \"\",\n        age: \"\",\n        birth: \"\",\n        sex: \"\"\n      };\n    },\n    getInitList: function getInitList(page, name) {\n      var _this2 = this;\n\n      this.config.loading = true;\n      name ? this.config.page = 1 : \"\";\n      page ? this.config.page = page : '';\n      console.log(this.config.page, name);\n      getUserList({\n        page: this.config.page,\n        name: name\n      }).then(function (res) {\n        _this2.tableData = res.data.list.map(function (item) {\n          item.sex === '0' ? '女' : '男';\n          return item;\n        });\n        console.log(res);\n        _this2.config.total = res.data.count;\n        _this2.config.loading = false;\n      });\n    },\n    editTableUser: function editTableUser(row) {\n      this.operateType = 'edit';\n      this.isShow = true;\n      this.operateForm = row;\n    },\n    delTableUser: function delTableUser(row) {\n      var _this3 = this;\n\n      this.$confirm('此操作将永久删除该用户，是否继续？', '提示', {\n        confirmButtonText: '',\n        cancelButtonText: '',\n        type: 'warning'\n      }).then(function () {\n        var id = row.id;\n        console.log(row);\n        delUser(id).then(function (res) {\n          console.log(res);\n\n          _this3.$message({\n            type: 'success',\n            message: '删除成功'\n          });\n\n          _this3.getInitList();\n        });\n      }).catch(function (err) {\n        console.log(err);\n      });\n    }\n  },\n  created: function created() {\n    this.getInitList();\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2CA;AACA;AACA;AACA;AACAA,cADA;AAEAC;AACAC,0BADA;AAEAC;AAFA,GAFA;AAMAC,MANA,kBAMA;AACA;AACAC,wBADA;AAEAC,mBAFA;AAGAC,yBACA;AACAC,qBADA;AAEAC,mBAFA;AAGAC;AAHA,OADA,EAMA;AACAF,oBADA;AAEAC,mBAFA;AAGAC;AAHA,OANA,EAWA;AACAF,oBADA;AAEAC,mBAFA;AAGAC,sBAHA;AAIAC,eACA;AACAF,oBADA;AAEAG;AAFA,SADA,EAKA;AACAH,oBADA;AAEAG;AAFA,SALA;AAJA,OAXA,EA0BA;AACAJ,sBADA;AAEAC,qBAFA;AAGAC;AAHA,OA1BA,EA+BA;AACAF,qBADA;AAEAC,mBAFA;AAGAC;AAHA,OA/BA,CAHA;AAwCAG;AACAb,gBADA;AAEAc,gBAFA;AAGAC,eAHA;AAIAC,iBAJA;AAKAC;AALA,OAxCA;AA+CAC,kBACA;AACAV,wBADA;AAEAC,iBAFA;AAGAC;AAHA,OADA,CA/CA;AAsDAS;AACAC;AADA,OAtDA;AAyDAC,mBAzDA;AA0DAC,mBACA;AACAC,oBADA;AAEAd;AAFA,OADA,EAKA;AACAc,mBADA;AAEAd;AAFA,OALA,EASA;AACAc,wBADA;AAEAd;AAFA,OATA,EAaA;AACAc,qBADA;AAEAd,qBAFA;AAGAe;AAHA,OAbA,EAkBA;AACAD,oBADA;AAEAd,mBAFA;AAGAe;AAHA,OAlBA,CA1DA;AAkFAC;AACAC,eADA;AAEAC;AAFA;AAlFA;AAuFA,GA9FA;AA+FAC;AACAC,WADA,qBACA;AAAA;;AACA;AACAC;AACAC;AACA;;AACA;AACA,SAJA;AAKA,OANA,MAMA;AACAC;AACAD;AACA;;AACA;AACA,SAJA;AAKA;AACA,KAfA;AAgBAC,WAhBA,qBAgBA;AACA;AACA;AACA;AACAhC,gBADA;AAEAc,gBAFA;AAGAC,eAHA;AAIAC,iBAJA;AAKAC;AALA;AAOA,KA1BA;AA2BAgB,eA3BA,uBA2BAP,IA3BA,EA2BA1B,IA3BA,EA2BA;AAAA;;AACA;AAEAA;AACA0B;AACAK;AACAG;AAAAR;AAAA1B;AAAA,cACA;AACA;AACAmC;AACA;AACA,SAHA;AAIAJ;AACA;AACA;AACA,OATA;AAWA,KA5CA;AA6CAK,iBA7CA,yBA6CAC,GA7CA,EA6CA;AACA;AACA;AACA;AACA,KAjDA;AAkDAC,gBAlDA,wBAkDAD,GAlDA,EAkDA;AAAA;;AACA;AACAE,6BADA;AAEAC,4BAFA;AAGA9B;AAHA,SAIA+B,IAJA,CAIA;AACA;AACAV;AACAW;AACAX;;AACA;AACArB,2BADA;AAEAiC;AAFA;;AAIA;AACA,SAPA;AAQA,OAfA,EAeAC,KAfA,CAeA;AACAb;AACA,OAjBA;AAkBA;AArEA,GA/FA;AAsKAc,SAtKA,qBAsKA;AACA;AACA;AAxKA","names":["name","components","CommonForm","CommonTable","data","operateType","isShow","operateFormLabel","model","label","type","opts","value","operateForm","addr","age","birth","sex","formLabel","searchForm","keyword","tableData","tableLabel","prop","width","config","page","total","methods","confirm","editUser","console","addUser","getInitList","getUserList","item","editTableUser","row","delTableUser","confirmButtonText","cancelButtonText","then","delUser","message","catch","created"],"sourceRoot":"src/views/User","sources":["index.vue"],"sourcesContent":["<template>\n  <div class=\"manage\">\n    <el-dialog\n      :title=\"operateType == 'add' ? '新增用户' : '编辑用户'\"\n      :visible.sync=\"isShow\"\n    >\n      <common-form\n        :formLabel=\"operateFormLabel\"\n        :inline=\"true\"\n        :form=\"operateForm\"\n        ref=\"userForm\"\n      >\n      </common-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"primary\" @click=\"isShow = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"confirm\">确定</el-button>\n      </div>\n    </el-dialog>\n    <div class=\"manage-header\">\n      <el-button type=\"primary\" @click=\"addUser\">新增</el-button>\n      <common-form\n        :formLabel=\"formLabel\"\n        :inline=\"true\"\n        :form=\"searchForm\"\n        ref=\"userForm\"\n      >\n        <el-button type=\"primary\" size=\"default\" @click=\"getInitList(1,searchForm.keyword)\"\n          >搜索</el-button\n        >\n      </common-form>\n    </div>\n    <common-table\n      :tableData=\"tableData\"\n      :tableLabel=\"tableLabel\"\n      :config=\"config\"\n      @changePage=\"getInitList\"\n      @userEdit=\"editTableUser\"\n      @delUser=\"delTableUser\"\n    ></common-table>\n  </div>\n</template>\n\n<script>\nimport CommonForm from \"@/components/CommonForm.vue\";\nimport CommonTable from \"@/components/CommonTable.vue\";\nimport { editUser, addUser, getUserList,delUser } from \"../../../api/data\";\nexport default {\n  name: \"user\",\n  components: {\n    CommonForm,\n    CommonTable,\n  },\n  data() {\n    return {\n      operateType: \"add\",\n      isShow: false,\n      operateFormLabel: [\n        {\n          model: \"name\",\n          label: \"姓名\",\n          type: \"input\",\n        },\n        {\n          model: \"age\",\n          label: \"年龄\",\n          type: \"input\",\n        },\n        {\n          model: \"sex\",\n          label: \"性别\",\n          type: \"select\",\n          opts: [\n            {\n              label: \"男\",\n              value: 1,\n            },\n            {\n              label: \"女\",\n              value: 0,\n            },\n          ],\n        },\n        {\n          model: \"birth\",\n          label: \"出生日期\",\n          type: \"date\",\n        },\n        {\n          model: \"addr\",\n          label: \"地址\",\n          type: \"input\",\n        },\n      ],\n      operateForm: {\n        name: \"\",\n        addr: \"\",\n        age: \"\",\n        birth: \"\",\n        sex: \"\",\n      },\n      formLabel: [\n        {\n          model: \"keyword\",\n          label: \"\",\n          type: \"input\",\n        },\n      ],\n      searchForm: {\n        keyword: \"\",\n      },\n      tableData: [],\n      tableLabel: [\n        {\n          prop: \"name\",\n          label: \"姓名\",\n        },\n        {\n          prop: \"age\",\n          label: \"年龄\",\n        },\n        {\n          prop: \"sexLabel\",\n          label: \"性别\",\n        },\n        {\n          prop: \"birth\",\n          label: \"出生日期\",\n          width: 200,\n        },\n        {\n          prop: \"addr\",\n          label: \"地址\",\n          width: 320,\n        },\n      ],\n      config: {\n        page: 1,\n        total: 30,\n      },\n    };\n  },\n  methods: {\n    confirm() {\n      if (this.operateType == \"edit\") {\n        editUser(this.operateForm).then((res) => {\n          console.log(res);\n          this.isShow = false;\n          this.getInitList()\n        });\n      } else {\n        addUser(this.operateForm).then((res) => {\n          console.log(res);\n          this.isShow = false;\n          this.getInitList()\n        });\n      }\n    },\n    addUser() {\n      this.isShow = true;\n      this.operateType = \"add\";\n      this.operateForm = {\n        name: \"\",\n        addr: \"\",\n        age: \"\",\n        birth: \"\",\n        sex: \"\",\n      };\n    },\n    getInitList(page, name) {\n      this.config.loading = true;\n      \n      name ? (this.config.page = 1) : \"\";\n      page ? (this.config.page = page) : '';\n      console.log(this.config.page,name)\n      getUserList({ page: this.config.page, name: name }).then(\n        res=>{\n          this.tableData = res.data.list.map(item=>{\n          item.sex ==='0' ? '女' : '男'\n          return item\n          })\n          console.log(res)\n          this.config.total = res.data.count\n          this.config.loading = false\n        }\n      );\n    },\n    editTableUser(row) {\n      this.operateType = 'edit'\n      this.isShow = true\n      this.operateForm = row\n    },\n    delTableUser(row) {\n      this.$confirm('此操作将永久删除该用户，是否继续？','提示',{\n        confirmButtonText:'',\n        cancelButtonText:'',\n        type:'warning'\n      }).then(()=>{\n        const id = row.id\n        console.log(row)\n        delUser(id).then((res)=>{\n          console.log(res)\n          this.$message({\n            type:'success',\n            message:'删除成功'\n          })\n          this.getInitList()\n        })\n      }).catch((err)=>{\n        console.log(err)\n      })\n    },\n  },\n  created () {\n    this.getInitList()\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.manage-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n</style>"]},"metadata":{},"sourceType":"module"}