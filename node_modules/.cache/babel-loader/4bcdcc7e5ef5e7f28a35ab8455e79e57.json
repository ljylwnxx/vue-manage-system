{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n// import Mock from \"mockjs\";\nimport { getMenu } from \"../../../api/data\";\nimport axios from 'axios';\nexport default {\n  name: 'login',\n  data: function data() {\n    return {\n      form: {},\n      rules: {\n        username: [{\n          required: true,\n          message: \"请输入用户名\",\n          trigger: \"blur\"\n        }, {\n          min: 3,\n          message: \"用户名长度不能小于3位\",\n          trigger: \"blur\"\n        }],\n        password: [{\n          required: true,\n          message: \"请输入密码\",\n          trigger: \"blur\"\n        }]\n      }\n    };\n  },\n  methods: {\n    login: function login() {\n      var _this = this;\n\n      getMenu(this.form).then(function (_ref) {\n        var res = _ref.data;\n\n        //code位于res.data中\n        if (res.code === 20000) {\n          _this.$store.commit(\"clearMenu\");\n\n          _this.$store.commit(\"setMenu\", res.data.menu);\n\n          _this.$store.commit(\"setToken\", res.data.token);\n\n          _this.$store.commit(\"addMenu\", _this.$router);\n\n          _this.$router.push({\n            name: \"home\"\n          });\n        } else {\n          _this.$message.warning(res.data.message);\n        }\n      }); //通过Mock来模拟生成后端的token\n      //   const token = Mock.random.guid();\n      //   this.$store.commit(\"setToken\", token);\n      //   this.$router.push({name: \"home\",});\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiDA;AACA;AACA;AACA;AACAA,eADA;AAGAC,MAHA,kBAGA;AACA;AACAC,cADA;AAEAC;AACAC,mBACA;AACAC,wBADA;AAEAC,2BAFA;AAGAC;AAHA,SADA,EAMA;AACAC,gBADA;AAEAF,gCAFA;AAGAC;AAHA,SANA,CADA;AAaAE,mBACA;AACAJ,wBADA;AAEAC,0BAFA;AAGAC;AAHA,SADA;AAbA;AAFA;AAwBA,GA5BA;AA6BAG;AACAC,SADA,mBACA;AAAA;;AACAC;AAAA;;AACA;AACA;AACA;;AACA;;AACA;;AACA;;AACA;AAAAZ;AAAA;AACA,SANA,MAMA;AACA;AACA;AACA,OAXA,EADA,CAaA;AACA;AACA;AACA;AACA;AAlBA;AA7BA","names":["name","data","form","rules","username","required","message","trigger","min","password","methods","login","getMenu"],"sourceRoot":"src/views/Login","sources":["login.vue"],"sourcesContent":["<template>\n  <el-form\n    :model=\"form\"\n    status-icon\n    :rules=\"rules\"\n    ref=\"form\"\n    label-width=\"100px\"\n    class=\"login-container\"\n  >\n    <h3 class=\"login_title\">欢迎登录管理系统</h3>\n    当前天气：{{weather}}\n    <el-form-item\n      label=\"用户名\"\n      label-width=\"80px\"\n      prop=\"username\"\n      class=\"username\"\n    >\n      <el-input\n        type=\"input\"\n        v-model=\"form.username\"\n        auto-complete=\"off\"\n        placeholder=\"请输入账号\"\n      ></el-input>\n    </el-form-item>\n    <el-form-item\n      label=\"密码\"\n      label-width=\"80px\"\n      prop=\"password\"\n      class=\"password\"\n    >\n      <el-input\n        type=\"password\"\n        v-model=\"form.password\"\n        auto-complete=\"off\"\n        placeholder=\"请输密码\"\n      ></el-input>\n    </el-form-item>\n    <el-form-item class=\"login_submit\">\n      <el-button\n      type=\"primary\"\n      @click=\"login\"\n      class=\"login_submit\"\n        >登录\n      </el-button>\n    </el-form-item>\n  </el-form>\n</template>\n\n<script>\n// import Mock from \"mockjs\";\nimport { getMenu } from \"../../../api/data\";\nimport axios from 'axios'\nexport default {\n  name: 'login',\n\n  data() {\n    return {\n      form: {},\n      rules: {\n        username: [\n          {\n            required: true,\n            message: \"请输入用户名\",\n            trigger: \"blur\",\n          },\n          {\n            min: 3,\n            message: \"用户名长度不能小于3位\",\n            trigger: \"blur\",\n          },\n        ],\n        password: [\n          {\n            required: true,\n            message: \"请输入密码\",\n            trigger: \"blur\",\n          },\n        ],\n      },\n    };\n  },\n  methods: {\n    login() {\n      getMenu(this.form).then(({ data: res }) => {\n        //code位于res.data中\n        if (res.code === 20000) {\n          this.$store.commit(\"clearMenu\");\n          this.$store.commit(\"setMenu\", res.data.menu);\n          this.$store.commit(\"setToken\", res.data.token);\n          this.$store.commit(\"addMenu\", this.$router);\n          this.$router.push({ name: \"home\" });\n        } else {\n          this.$message.warning(res.data.message);\n        }\n      });\n      //通过Mock来模拟生成后端的token\n      //   const token = Mock.random.guid();\n      //   this.$store.commit(\"setToken\", token);\n      //   this.$router.push({name: \"home\",});\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.login-container {\n  border-radius: 15px;\n  background-clip: padding-box;\n  margin: 180px auto;\n  width: 350px;\n  padding: 35px 35px 15px 35px;\n  background-color: #fff;\n  border: 1px solid #eaeaea;\n  box-shadow: 0 0 25px #cac6c6;\n}\n.login_title {\n  margin: 0px auto 40px auto;\n  text-align: center;\n  color: #ffc640;\n}\n.login_submit {\n  margin: 10px auto 10px auto;\n}\n</style>"]},"metadata":{},"sourceType":"module"}